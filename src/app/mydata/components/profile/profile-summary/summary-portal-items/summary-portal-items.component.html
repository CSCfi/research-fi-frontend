<!--  This file is part of the research.fi API service
 Copyright 2019 Ministry of Education and Culture, Finland
 :author: CSC - IT Center for Science Ltd., Espoo Finland servicedesk@csc.fi
 :license: MIT -->

<div class="summary-panel-wrapper">
  <div class="summary-panel" *ngFor="let item of sortedItems.slice(0, itemDisplayCount); index as i">
    <ng-container *ngIf="item.itemMeta.show">
      <div *ngIf="i === 0" class="year-caption">
        {{sortedItems.slice(0, itemDisplayCount)[i].publicationYear}}
      </div>
      <div *ngIf="i > 0 && sortedItems.slice(0, itemDisplayCount)[i].publicationYear !== sortedItems.slice(0, itemDisplayCount)[i-1].publicationYear" class="year-caption">
        {{sortedItems.slice(0, itemDisplayCount)[i].publicationYear}}
      </div>

      <div class="row">
        <div [ngClass]="fieldType === FieldTypes.activityPublication ? 'col px-4' : 'col'">
          <app-panel-array-item [item]="item" [fieldType]="fieldType" [summary]="true"></app-panel-array-item>
        </div>
      </div>
      <div class="row">
      <app-summary-divider></app-summary-divider>
      </div>
    </ng-container>
  </div>
</div>

<div class="row justify-content-center">
  <button *ngIf="sortedItems.length > 3 && itemDisplayCount === 3" class="col-auto" mat-button (click)="showAllItems()" color="primary">
    {{ showMorePrefix }} {{ showMoreLabel | lowercase }}
  </button>
</div>
