<!--  This file is part of the research.fi API service
 Copyright 2019 Ministry of Education and Culture, Finland
 :author: CSC - IT Center for Science Ltd., Espoo Finland servicedesk@csc.fi
 :license: MIT -->
    
<div class="mobile mx-auto" id="navbar-toggle">
    <button class="navbar-toggler navbar-toggler-right container-fluid" type="button" (click)="toggleSidebar()">
        <h3 [class.open]="sidebarOpen">Rajaa hakua</h3>
        <!-- <span *ngIf="!sidebarOpen" class="fa fa-filter fa-lg"></span> -->
        <!-- <span *ngIf="sidebarOpen" class="fa fa-times fa-lg"></span> -->
    </button>
</div>

 <div #filterSidebar class="filter-sidebar" *ngFor="let response of responseData">
    <h3 *ngIf="!mobile">Rajaa hakua</h3>
    <mat-expansion-panel [expanded]="true" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
            <mat-panel-title>
                <strong>Julkaisuvuosi</strong>
            </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="scrollable">
            <mat-selection-list #selectedYears (selectionChange)="onSelectionChange()">
                <mat-list-option checkboxPosition="before" *ngFor="let year of response.aggregations._index.buckets.publications.years.buckets" 
                [value]="year.key" [selected]="preSelection.indexOf(year.key) > -1">
                    <span class="year">{{year.key}}</span>
                    <span class="amount">{{year.doc_count}}</span>
                </mat-list-option>
            </mat-selection-list>    
        </div>
    </mat-expansion-panel>

    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
            <mat-panel-title>
                <strong>Sektori</strong>
            </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-checkbox></mat-checkbox>
    </mat-expansion-panel>

    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
            <mat-panel-title>
                <strong>Organisaatio</strong>
            </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-checkbox></mat-checkbox>
    </mat-expansion-panel>

    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
            <mat-panel-title>
                <strong>P채채tieteenala</strong>
            </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="scrollable">
            <mat-form-field class="example-full-width">
                <input matInput placeholder="Rajaa tieteenaloja" autocomplete="off" (keyup)="filterInput($event)">
            </mat-form-field>
            <mat-selection-list #selectedFields (selectionChange)="onSelectionChange()">
                    <mat-list-option checkboxPosition="before" *ngFor="let field of fields" 
                    [value]="field.key" [selected]="preSelection.indexOf(field.key) > -1">
                        <span class="year">{{field.key}}</span>
                        <span class="amount">{{field.doc_count}}</span>
                    </mat-list-option>
                </mat-selection-list>
            </div>
        </mat-expansion-panel>
    
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <strong>Tieteenala</strong>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-checkbox></mat-checkbox>
        </mat-expansion-panel>
    
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <strong>Julkaisun p채채luokka</strong>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-checkbox></mat-checkbox>
        </mat-expansion-panel>
    
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <strong>Julkaisutyyppi</strong>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-checkbox></mat-checkbox>
        </mat-expansion-panel>
    
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <strong>Julkaisumaa</strong>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-checkbox></mat-checkbox>
        </mat-expansion-panel>
    
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <strong>Kieli</strong>
                </mat-panel-title>
            </mat-expansion-panel-header>
        </mat-expansion-panel>
    
    </div>