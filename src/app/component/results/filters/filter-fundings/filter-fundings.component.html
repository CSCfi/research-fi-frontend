<!--  This file is part of the research.fi API service
 Copyright 2019 Ministry of Education and Culture, Finland
 :author: CSC - IT Center for Science Ltd., Espoo Finland servicedesk@csc.fi
 :license: MIT -->
    
 <div class="mobile mx-auto" id="navbar-toggle">
    <button class="navbar-toggler navbar-toggler-right container-fluid" type="button" (click)="toggleSidebar()">
        <h3 [class.open]="sidebarOpen">Rajaa hakua</h3>
        <!-- <span *ngIf="!sidebarOpen" class="fa fa-filter fa-lg"></span> -->
        <!-- <span *ngIf="sidebarOpen" class="fa fa-times fa-lg"></span> -->
    </button>
</div>

<div #filterSidebar class="filter-sidebar" *ngFor="let response of responseData">
    <h3 *ngIf="!mobile">Rajaa hakua</h3>
    <div class="filter-wrapper">
        <mat-accordion>
            <mat-expansion-panel [expanded]="true">
                <mat-expansion-panel-header expandedHeight="{{panelHeight}}" collapsedHeight="{{panelHeight}}">
                    <mat-panel-title>
                        <strong>Aloitusvuosi</strong>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-selection-list #selectedYears (selectionChange)="onSelectionChange()">
                    <mat-list-option checkboxPosition="before" *ngFor="let year of response.aggregations.years.buckets"
                    [value]="year.key" [selected]="preSelection.indexOf(''+year.key) > -1">
                        <span class="label">{{year.key}}</span>
                    </mat-list-option>
                </mat-selection-list>
            </mat-expansion-panel>

            <mat-expansion-panel>
                <mat-expansion-panel-header expandedHeight="{{panelHeight}}" collapsedHeight="{{panelHeight}}">
                    <mat-panel-title>
                        <strong>Organisaatio</strong>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-checkbox></mat-checkbox>
            </mat-expansion-panel>

            <mat-expansion-panel>
                <mat-expansion-panel-header expandedHeight="{{panelHeight}}" collapsedHeight="{{panelHeight}}">
                    <mat-panel-title>
                        <strong>Rahoittaja</strong>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-checkbox></mat-checkbox>
            </mat-expansion-panel>

            <mat-expansion-panel>
                <mat-expansion-panel-header expandedHeight="{{panelHeight}}" collapsedHeight="{{panelHeight}}">
                    <mat-panel-title>
                        <strong>Rahoitusmuoto</strong>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-checkbox></mat-checkbox>
            </mat-expansion-panel>

            <mat-expansion-panel>
                <mat-expansion-panel-header expandedHeight="{{panelHeight}}" collapsedHeight="{{panelHeight}}">
                    <mat-panel-title>
                        <strong>Tieteenala</strong>
                    </mat-panel-title>
                </mat-expansion-panel-header>
            </mat-expansion-panel>

            <mat-expansion-panel>
                <mat-expansion-panel-header expandedHeight="{{panelHeight}}" collapsedHeight="{{panelHeight}}">
                    <mat-panel-title>
                        <strong>Teema-ala</strong>
                    </mat-panel-title>
                </mat-expansion-panel-header>
            </mat-expansion-panel>

            <mat-expansion-panel>
                <mat-expansion-panel-header expandedHeight="{{panelHeight}}" collapsedHeight="{{panelHeight}}">
                    <mat-panel-title>
                        <strong>Myönnetty rahoitus</strong>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-selection-list #selectedFundingAmount (selectionChange)="onSelectionChange()">
                    <mat-list-option checkboxPosition="before" [value]="'over100k'" [selected]="preSelection.indexOf('over100k') > -1">
                        <span class="label">Yli 100 000€</span>
                    </mat-list-option>
                    <mat-list-option checkboxPosition="before" [value]="'under100k'" [selected]="preSelection.indexOf('under100k') > -1">
                        <span class="label">Alle 100 000€</span>
                    </mat-list-option>
                </mat-selection-list>
            </mat-expansion-panel>

            <mat-expansion-panel>
                <mat-expansion-panel-header expandedHeight="{{panelHeight}}" collapsedHeight="{{panelHeight}}">
                    <mat-panel-title>
                        <strong>Hankkeen tila</strong>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-selection-list #selectedStatus (selectionChange)="onSelectionChange()">
                    <mat-list-option checkboxPosition="before" [value]="'onGoing'" [selected]="preSelection.indexOf('onGoing') > -1">
                        <span class="label">Käynnissä</span>
                        <!-- <span class="amount"></span> -->
                    </mat-list-option>
                    <mat-list-option checkboxPosition="before" [value]="'ended'" [selected]="preSelection.indexOf('ended') > -1">
                        <span class="label">Päättynyt</span>
                        <!-- <span class="amount"></span> -->
                    </mat-list-option>
                </mat-selection-list>
            </mat-expansion-panel>
        </mat-accordion>
    </div>
</div>
